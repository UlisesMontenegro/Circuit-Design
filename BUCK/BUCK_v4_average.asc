Version 4
SHEET 1 1932 1700
WIRE -688 576 -1056 576
WIRE -528 576 -688 576
WIRE -272 576 -448 576
WIRE -128 576 -272 576
WIRE 48 576 -128 576
WIRE 96 576 48 576
WIRE -272 608 -272 576
WIRE -128 608 -128 576
WIRE -960 656 -1424 656
WIRE 96 656 96 576
WIRE -272 720 -272 688
WIRE -128 720 -128 688
WIRE -1424 736 -1424 656
WIRE -960 736 -960 656
WIRE -896 736 -960 736
WIRE -688 736 -688 576
WIRE -688 736 -768 736
WIRE -1056 784 -1056 576
WIRE -896 784 -1056 784
WIRE -512 784 -768 784
WIRE -272 832 -272 784
WIRE -128 832 -128 784
WIRE -128 832 -272 832
WIRE 96 832 96 736
WIRE 96 832 -128 832
WIRE -832 880 -832 800
WIRE -928 928 -1024 928
WIRE -832 1024 -832 960
WIRE -512 1024 -512 784
WIRE -1424 1040 -1424 816
WIRE -128 1040 -128 832
WIRE -768 1072 -832 1072
WIRE -592 1072 -688 1072
WIRE -1024 1104 -1024 928
WIRE -1024 1120 -1024 1104
WIRE -832 1152 -832 1072
WIRE -768 1152 -832 1152
WIRE -688 1152 -704 1152
WIRE -592 1152 -592 1072
WIRE -592 1152 -608 1152
WIRE 48 1168 48 576
WIRE -1024 1216 -1024 1200
WIRE -592 1280 -592 1152
WIRE -592 1280 -688 1280
WIRE 48 1280 48 1248
WIRE 48 1280 -592 1280
WIRE -1408 1296 -1408 1280
WIRE -1024 1296 -1024 1216
WIRE -832 1296 -832 1152
WIRE -832 1296 -1024 1296
WIRE -752 1296 -832 1296
WIRE -624 1312 -688 1312
WIRE -1984 1328 -1984 1296
WIRE 48 1328 48 1280
WIRE -624 1360 -624 1312
WIRE -720 1408 -720 1328
WIRE -1408 1424 -1408 1376
WIRE 48 1424 48 1408
WIRE -1984 1440 -1984 1408
WIRE -624 1472 -624 1440
FLAG -1408 1424 0
FLAG -1408 1280 d
FLAG -1424 1040 0
FLAG 96 576 VREG_2
FLAG -512 1024 0
FLAG -128 1040 0
FLAG -688 576 Vsw
FLAG 48 1424 0
FLAG -720 1408 0
FLAG -624 1472 0
FLAG -832 1024 0
FLAG -928 928 ctrl
IOPIN -928 928 Out
FLAG -1024 1104 x
FLAG -1024 1216 y
FLAG 48 1280 Vf_buck
FLAG -1984 1440 0
FLAG -720 1264 VPOS
FLAG -1984 1296 VPOS
SYMBOL voltage -1408 1280 R0
WINDOW 3 -374 105 Left 2
WINDOW 123 -87 77 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PWL(0 0.174 5.01m 0.174 5.02m 0.180)
SYMATTR Value2 AC 0
SYMATTR InstName Vduty1
SYMBOL voltage -1424 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 12
SYMBOL ind -544 592 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 90µ
SYMBOL cap -288 720 R0
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL cap -144 720 R0
SYMATTR InstName C8
SYMATTR Value 1n
SYMBOL res 80 640 R0
SYMATTR InstName RL1
SYMATTR Value 4.3
SYMBOL res -288 592 R0
SYMATTR InstName R5
SYMATTR Value 30
SYMBOL res -144 592 R0
SYMATTR InstName R6
SYMATTR Value 0.1
SYMBOL res 32 1152 R0
SYMATTR InstName R7
SYMATTR Value 5.1k
SYMBOL res 32 1312 R0
SYMATTR InstName R8
SYMATTR Value 1.2k
SYMBOL voltage -624 1344 R0
WINDOW 123 24 116 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 0
SYMATTR InstName Vref1
SYMATTR Value PWL(0 1.2 8m 1.2 8.1m 1.21)
SYMBOL bv -832 864 R0
SYMATTR InstName B1
SYMATTR Value V=limit(v(ctrl), 0.01, 0.9)
SYMBOL voltage -1024 1104 R0
WINDOW 0 41 45 Left 2
WINDOW 123 37 65 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vz1
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMBOL voltage -1984 1312 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName Vg1
SYMATTR Value 5
SYMBOL Opamps\\opamp2 -720 1232 M0
SYMATTR InstName U3
SYMATTR Value LM358
SYMBOL ccm1 -832 768 R0
SYMATTR InstName U2
SYMATTR Value CCM2
SYMATTR SpiceLine Ron=0.16
SYMATTR SpiceLine2 VD=0 RD=0.16
SYMBOL cap -704 1136 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res -672 1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 180k
SYMBOL res -592 1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 220
TEXT -2320 776 Left 2 !.lib switching_average\\switching.lib
TEXT -2320 832 Left 2 !.lib switching_average\\average.lib
TEXT -2312 720 Left 2 ;Librerias de simulacion
TEXT -2320 992 Left 2 !.tran 0 12m 7m 1u
TEXT -2320 1040 Left 2 !;ac dec 300 0.01 1Meg
TEXT -2320 944 Left 2 ;Tipos de simulacion
TEXT -2312 880 Left 2 !.inc LM339.txt
TEXT -2312 912 Left 2 !.inc LM358.txt
