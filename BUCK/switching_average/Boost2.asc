Version 4
SHEET 1 1044 1448
WIRE 576 -48 544 -48
WIRE 704 -48 656 -48
WIRE 800 -48 768 -48
WIRE -1344 48 -1472 48
WIRE 48 48 -1344 48
WIRE 480 48 128 48
WIRE 544 48 544 -48
WIRE 544 48 480 48
WIRE 704 48 544 48
WIRE 800 48 800 -48
WIRE 800 48 768 48
WIRE 848 48 800 48
WIRE 944 48 848 48
WIRE -1472 64 -1472 48
WIRE 848 64 848 48
WIRE 944 64 944 48
WIRE -1344 80 -1344 48
WIRE 480 112 480 48
WIRE 624 112 480 112
WIRE 624 144 624 112
WIRE -1472 160 -1472 144
WIRE 848 160 848 128
WIRE 944 160 944 144
WIRE -1344 176 -1344 144
WIRE 480 176 480 112
WIRE -1136 192 -1136 160
WIRE -1168 208 -1232 208
WIRE -704 208 -704 176
WIRE -1008 224 -1104 224
WIRE -976 224 -1008 224
WIRE -944 224 -976 224
WIRE -816 224 -864 224
WIRE -736 224 -816 224
WIRE -384 224 -384 208
WIRE -1232 240 -1232 208
WIRE -1168 240 -1200 240
WIRE -576 240 -672 240
WIRE -416 240 -576 240
WIRE -736 256 -784 256
WIRE 16 256 -352 256
WIRE 336 256 96 256
WIRE 432 256 336 256
WIRE 624 256 624 224
WIRE 800 256 800 48
WIRE 800 256 752 256
WIRE -416 272 -496 272
WIRE 752 272 752 256
WIRE -1136 288 -1136 256
WIRE -976 288 -976 224
WIRE -784 288 -784 256
WIRE -704 288 -704 272
WIRE -384 304 -384 288
WIRE -816 320 -816 224
WIRE 480 336 480 272
WIRE 624 336 624 320
WIRE 624 336 480 336
WIRE 800 336 800 256
WIRE 752 352 752 336
WIRE 64 432 64 384
WIRE -1200 448 -1200 240
WIRE -976 448 -976 368
WIRE -976 448 -1200 448
WIRE -944 448 -976 448
WIRE -816 448 -816 384
WIRE -816 448 -864 448
WIRE -576 448 -576 240
WIRE -576 448 -816 448
WIRE 752 448 752 432
WIRE 752 448 96 448
WIRE 800 448 800 416
WIRE 800 448 752 448
WIRE -496 464 -496 272
WIRE -272 464 -496 464
WIRE -208 464 -272 464
WIRE 32 464 -128 464
WIRE -272 480 -272 464
WIRE 160 480 96 480
WIRE -1520 496 -1520 432
WIRE -1392 496 -1392 432
WIRE 64 528 64 496
WIRE 800 544 800 528
WIRE 480 560 480 336
WIRE -272 576 -272 560
WIRE 480 656 480 640
WIRE -1520 672 -1520 576
WIRE -1392 672 -1392 576
WIRE 64 816 -16 816
WIRE 128 816 64 816
WIRE 320 816 128 816
WIRE -16 864 -16 816
WIRE 128 864 128 816
WIRE 320 976 320 816
WIRE -16 992 -16 944
WIRE 288 992 -16 992
WIRE 432 1008 352 1008
WIRE 544 1008 432 1008
WIRE -16 1024 -16 992
WIRE -16 1024 -176 1024
WIRE 128 1024 128 944
WIRE 288 1024 128 1024
WIRE 432 1024 432 1008
WIRE -176 1056 -176 1024
WIRE -16 1056 -16 1024
WIRE 128 1056 128 1024
WIRE 320 1072 320 1040
WIRE 48 1104 -112 1104
WIRE 192 1104 48 1104
WIRE 256 1104 192 1104
WIRE 544 1104 544 1008
WIRE 256 1120 256 1104
WIRE 432 1120 432 1104
WIRE 432 1120 256 1120
WIRE 432 1136 432 1120
WIRE -176 1168 -176 1152
WIRE -16 1168 -16 1152
WIRE -16 1168 -176 1168
WIRE -16 1184 -16 1168
WIRE -16 1280 -16 1264
WIRE 128 1280 128 1152
WIRE 128 1280 -16 1280
WIRE 128 1296 128 1280
WIRE 128 1392 128 1376
WIRE 432 1392 432 1216
WIRE 432 1392 128 1392
WIRE 544 1392 544 1168
WIRE 544 1392 432 1392
WIRE 128 1408 128 1392
FLAG -1472 160 0
FLAG 848 160 0
FLAG 944 160 0
FLAG 800 544 0
FLAG 944 48 OUT
FLAG -1472 48 IN
FLAG 480 656 0
FLAG 336 256 gate
FLAG -1344 176 0
FLAG -784 288 0
FLAG -1520 672 0
FLAG -1392 672 0
FLAG -1136 160 V+
FLAG -704 176 V+
FLAG -704 288 V-
FLAG -1136 288 V-
FLAG -1232 240 0
FLAG -1520 432 V+
FLAG -1392 432 V-
FLAG -576 240 Triangular
FLAG -384 208 V+
FLAG -384 304 V-
FLAG -1008 224 Cuadrada
FLAG 320 1072 0
FLAG 128 1408 0
FLAG 432 1008 Vref
FLAG 64 816 IN
FLAG 160 480 Vref
FLAG 64 528 V-
FLAG 64 384 V+
FLAG -272 576 0
SYMBOL nmos 432 176 R0
SYMATTR InstName Q1
SYMATTR Value IRF2807Z
SYMBOL ind 32 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 22µ
SYMBOL voltage -1472 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL schottky 704 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value mbrs340
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL polcap 832 64 R0
WINDOW 3 24 56 Left 2
SYMATTR InstName C3
SYMATTR Value 100µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=2 Irms=3 Rser=0.006 Lser=0 mfg="Rubycon" pn="2SLE100M" type="Al electrolytic"
SYMBOL res 784 320 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 784 432 R0
SYMATTR InstName R2
SYMATTR Value 4500
SYMBOL res 928 48 R0
SYMATTR InstName Rload
SYMATTR Value 8
SYMBOL res 464 544 R0
SYMATTR InstName Rsense
SYMATTR Value 8.54m
SYMBOL cap -1360 80 R0
SYMATTR InstName C5
SYMATTR Value 22m
SYMBOL res 608 128 R0
SYMATTR InstName RSnub
SYMATTR Value 100
SYMBOL cap 608 256 R0
SYMATTR InstName CSnub
SYMATTR Value 10p
SYMBOL res 560 -32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RSnub2
SYMATTR Value 1.5k
SYMBOL cap 704 -32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName CSnub2
SYMATTR Value 10p
SYMBOL Opamps\\LT1215 64 400 M0
SYMATTR InstName U1
SYMBOL res 112 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 5
SYMBOL voltage -1520 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 50 43 VRight 2
WINDOW 3 78 43 VRight 2
SYMATTR InstName V2
SYMATTR Value PWL(0 0 1u 10)
SYMBOL voltage -1392 592 R180
WINDOW 0 -49 40 VRight 2
WINDOW 3 -77 40 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PWL(0 0 1u 10)
SYMBOL res -848 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -848 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 30 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 2.5k
SYMBOL res -992 272 R0
SYMATTR InstName R12
SYMATTR Value 5k
SYMBOL cap -832 320 R0
SYMATTR InstName C8
SYMATTR Value .9n
SYMBOL OpAmps\\AD711 -704 176 R0
SYMATTR InstName U3
SYMBOL Comparators\\LTC6752 -1136 160 R0
SYMATTR InstName U5
SYMBOL OpAmps\\AD711 320 944 R0
SYMATTR InstName U2
SYMBOL npn 48 1056 M0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL npn 192 1056 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res -32 848 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 112 848 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -32 1168 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res 112 1280 R0
SYMATTR InstName R6
SYMATTR Value 200
SYMBOL res 416 1008 R0
SYMATTR InstName R13
SYMATTR Value 1.2k
SYMBOL res 416 1120 R0
SYMATTR InstName R14
SYMATTR Value 1.5k
SYMBOL npn -112 1056 M0
SYMATTR InstName Q4
SYMATTR Value 2N2222
SYMBOL res -288 464 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -112 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 15k
SYMBOL Comparators\\LTC6752 -384 192 R0
SYMATTR InstName U6
SYMBOL cap 528 1104 R0
SYMATTR InstName C1
SYMATTR Value 22µ
SYMBOL cap 768 336 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 220p
SYMBOL res 768 448 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 2.2k
TEXT -1272 752 Left 2 !.tran 10m
TEXT -288 1432 Left 2 ;https://wiki.analog.com/university/courses/electronics/text/chapter-14
TEXT 48 752 Left 2 ;bandgap reference
