* C:\Users\joaqu\Desktop\Circuit-Design\LDOA_Regulator\Regulador_LDOA_v3_Cuasi_Darlington_selector.asc
Q3 N001 N001 P001 0 BC327-25
Q4 Vod N001 P002 0 BC327-25
Q1 N001 Vref Pol 0 BC546B
Q2 Vod Vf Pol 0 BC546B
Q5 Vs1 N002 VIN 0 2SAR554P
Q6 N002 Vod Vs1 0 BC546B
Rf1 Vo Vf 3.16k
Rf2 N003 0 820
RL Vo 0 {RL}
V1 Vref 0 {VREFDC} AC {VREFAC}
VIN VIN 0 {VINDC} AC {VINAC}
R3 VIN P001 {RE}
R2 VIN P002 {RE}
C3 Vo 0 1µ
Rs Vo Vs1 0.1
R1 Vs N011 1k
R4 Vrefc N014 1k
R5 N014 N013 100k
R6 N011 0 100k
Q7 Vod P003 0 0 2N2222
R9 N006 Vs 100k
R10 Vo N006 10k
R11 Vs1 N005 10k
R12 N005 0 100k
R13 N004 Vref 50k
R14 0 N004 10k
R15 Vf N015 54.4k
R16 N015 0 46k
R17 N008 N007 10k
R18 N008 N016 10k
R19 Vrefc N009 10k
R20 0 N009 10k
Rf3 Vf N003 1k
M1 N003 SELA 0 0 AO6408
VSELA SELA 0 5
R7 N013 P003 100
XU2 N007 N004 N007 opamp Aol=100K GBW=10Meg
XU3 N016 N015 N016 opamp Aol=100K GBW=10Meg
XU4 N006 N005 Vs opamp Aol=100K GBW=10Meg
XU5 N014 N011 N013 opamp Aol=100K GBW=10Meg
XU1 N009 N008 Vrefc opamp Aol=100K GBW=10Meg
Q8 Pol N010 N012 0 BC546B
R8 Vref N010 100
R21 N012 0 500
.model NPN NPN
.model PNP PNP
.lib C:\Users\joaqu\Documents\LTspiceXVII\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\joaqu\Documents\LTspiceXVII\lib\cmp\standard.mos
.op
;ac dec 20 0.1 10Meg
.param VINDC 6.35
.param VINAC 1
.param VREFDC 1.2
.param VREFAC 0
;param RL 10
;dc VIN 1 12
;step param RE 1k 1.5k 100
.param RE 470
.step param RL 100 0.1 0.25
* Mido regulacion de linea
.meas DC Vo1rl FIND V(Vo) AT=6.25
.meas DC Vo2rl FIND V(Vo) AT=6.45
.meas DC RegLin PARAM ((Vo2rl-Vo1rl)/0.2)
* Mido regulacion de carga
.meas OP Vo1rc FIND V(Vo) AT 100
.meas OP Vo2rc FIND V(Vo) AT 10
.meas OP Io1rc FIND I(RL) AT 100
.meas OP Io2rc FIND I(RL) AT 10
* Mido eficiencia
* -100*((V(vo)*I(RL))/(V(VIN)*I(VIN)))
.meas OP RegCar PARAM (-(Vo2rc-Vo1rc)/(Io2rc-Io1rc))
;tran 0 1m 0 1u
* Lazo de Corriente
.include TL081.txt
* Referencia Lazo de Corriente
;step param VINDC 4 32 0.5
* Sumador
* Selector
.lib opamp.sub
* Fuente de corriente de polarizacion
.backanno
.end
