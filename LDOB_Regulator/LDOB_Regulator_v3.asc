Version 4
SHEET 1 6120 1580
WIRE -496 -528 -864 -528
WIRE -176 -528 -496 -528
WIRE 112 -528 -176 -528
WIRE 256 -528 208 -528
WIRE 304 -528 256 -528
WIRE 400 -528 304 -528
WIRE 608 -528 480 -528
WIRE 864 -528 608 -528
WIRE 1024 -528 864 -528
WIRE 1152 -528 1024 -528
WIRE 1152 -416 1152 -528
WIRE 1520 -416 1520 -592
WIRE 160 -400 160 -464
WIRE 256 -400 256 -528
WIRE -496 -384 -496 -448
WIRE -176 -384 -176 -448
WIRE -336 -336 -432 -336
WIRE -240 -336 -336 -336
WIRE 608 -320 608 -528
WIRE 1520 -272 1520 -336
WIRE 1680 -256 1568 -256
WIRE -864 -224 -864 -528
WIRE -496 -224 -496 -288
WIRE -336 -224 -336 -336
WIRE -336 -224 -496 -224
WIRE -176 -224 -176 -288
WIRE -80 -224 -176 -224
WIRE -64 -224 -80 -224
WIRE 32 -224 -64 -224
WIRE 208 -224 208 -336
WIRE 208 -224 32 -224
WIRE 1024 -224 1024 -528
WIRE 1152 -208 1152 -336
WIRE 1680 -192 1680 -256
WIRE -496 -144 -496 -224
WIRE -176 -144 -176 -224
WIRE -560 -96 -656 -96
WIRE 496 -96 -112 -96
WIRE 608 -96 608 -240
WIRE 608 -96 496 -96
WIRE 608 -64 608 -96
WIRE -80 -48 -80 -224
WIRE 1520 -16 1520 -192
WIRE 1568 -16 1568 -208
WIRE 1568 -16 1520 -16
WIRE 1680 -16 1680 -112
WIRE 1680 -16 1568 -16
WIRE -496 0 -496 -48
WIRE -352 0 -496 0
WIRE -176 0 -176 -48
WIRE -176 0 -352 0
WIRE -656 16 -656 -96
WIRE 608 32 608 16
WIRE 848 32 608 32
WIRE 1520 80 1520 -16
WIRE 912 112 896 112
WIRE -864 144 -864 -144
WIRE -656 144 -656 96
WIRE -656 144 -864 144
WIRE -352 144 -656 144
WIRE -80 144 -80 16
WIRE -80 144 -352 144
WIRE 608 144 608 112
WIRE 608 144 -80 144
WIRE 848 144 848 128
WIRE 848 144 608 144
WIRE 1024 144 1024 -144
WIRE 1024 144 848 144
WIRE 1152 144 1152 -144
WIRE 1152 144 1024 144
WIRE -352 160 -352 144
WIRE 480 480 480 448
WIRE 608 480 608 448
WIRE 320 560 288 560
WIRE 480 560 400 560
WIRE 976 560 944 560
WIRE 1088 560 1056 560
WIRE 1200 560 1088 560
WIRE 1312 576 1264 576
WIRE 1376 576 1312 576
WIRE 1536 576 1456 576
WIRE 1696 576 1536 576
WIRE 480 592 480 560
WIRE 528 592 480 592
WIRE 608 592 608 560
WIRE 608 592 560 592
WIRE 672 592 608 592
WIRE 768 592 672 592
WIRE 1200 592 1168 592
WIRE 1840 592 1760 592
WIRE 1904 592 1840 592
WIRE 288 608 288 560
WIRE 528 608 528 592
WIRE 560 608 560 592
WIRE 672 608 672 592
WIRE 1088 608 1088 560
WIRE 1696 608 1648 608
WIRE 768 624 768 592
WIRE -608 640 -608 608
WIRE 1168 672 1168 592
WIRE 1312 672 1312 576
WIRE 1312 672 1168 672
WIRE 1088 704 1088 688
WIRE 544 720 544 672
WIRE 672 720 672 688
WIRE 672 720 544 720
WIRE 768 720 768 688
WIRE 768 720 672 720
WIRE 1648 720 1648 608
WIRE 1696 720 1648 720
WIRE 1840 720 1840 592
WIRE 1840 720 1776 720
WIRE -1760 736 -1760 640
WIRE -1408 736 -1408 640
WIRE -608 736 -608 720
WIRE -496 736 -608 736
WIRE -1056 752 -1056 640
WIRE -608 752 -608 736
WIRE -384 752 -384 592
WIRE -176 784 -176 752
WIRE -496 800 -496 736
WIRE -496 800 -544 800
WIRE -448 800 -496 800
WIRE 384 816 304 816
WIRE 432 816 384 816
WIRE 544 816 544 720
WIRE 544 816 512 816
WIRE 1648 816 1648 800
WIRE 240 832 176 832
WIRE 336 848 304 848
WIRE 432 848 336 848
WIRE -608 864 -608 848
WIRE -384 864 -384 848
WIRE 992 880 960 880
WIRE 1104 880 1072 880
WIRE 1200 880 1104 880
WIRE 1312 896 1264 896
WIRE 1376 896 1312 896
WIRE 1536 896 1536 576
WIRE 1536 896 1456 896
WIRE -1760 912 -1760 816
WIRE -1408 912 -1408 816
WIRE -176 912 -176 880
WIRE 432 912 432 848
WIRE 544 912 512 912
WIRE 1200 912 1168 912
WIRE -1056 944 -1056 832
WIRE -608 960 -608 944
WIRE -496 960 -608 960
WIRE -384 960 -384 944
WIRE -384 960 -496 960
WIRE 1104 960 1104 880
WIRE 176 976 176 832
WIRE 224 976 176 976
WIRE 336 976 336 848
WIRE 336 976 304 976
WIRE -496 992 -496 960
WIRE 384 992 384 816
WIRE 1168 992 1168 912
WIRE 1312 992 1312 896
WIRE 1312 992 1168 992
WIRE 1104 1056 1104 1040
WIRE 176 1104 176 976
WIRE 224 1104 176 1104
WIRE 336 1104 336 976
WIRE 336 1104 288 1104
WIRE 384 1104 384 1072
WIRE -32 1168 -32 832
WIRE -32 1168 -64 1168
WIRE 592 1248 496 1248
WIRE 704 1248 672 1248
WIRE -64 1264 -64 1168
WIRE 0 1264 -64 1264
WIRE 176 1264 176 1104
WIRE 176 1264 80 1264
WIRE 496 1280 496 1248
WIRE -64 1376 -64 1328
WIRE 496 1376 496 1344
FLAG -352 160 0
FLAG 912 112 SELA
FLAG -864 -528 Vin
FLAG 1024 -528 Vo
FLAG 32 -224 Vod
FLAG 496 -96 Vf
FLAG -656 -96 Vref
FLAG 304 -528 Vs1
FLAG 288 608 0
FLAG 384 1104 0
FLAG -176 912 0
FLAG -176 752 Vod
FLAG 544 816 Vs
FLAG 544 912 Vrefc
FLAG 480 448 Vs1
FLAG 608 448 Vo
FLAG 1088 704 0
FLAG 1104 1056 0
FLAG 1648 816 0
FLAG 944 560 Vref
FLAG 960 880 Vf
FLAG 1904 592 Vrefc
FLAG -1056 944 0
FLAG -1056 640 SELA
FLAG -384 592 Pol
FLAG -496 992 0
FLAG -352 0 Pol
FLAG -608 608 Vin
FLAG 1232 544 0
FLAG 1232 608 VIN
FLAG 1232 864 0
FLAG 1232 928 VIN
FLAG 1728 560 0
FLAG 1728 624 VIN
FLAG 512 640 0
FLAG 576 640 VIN
FLAG 272 800 0
FLAG 272 864 VIN
FLAG 496 1376 VCOMP_V
FLAG -1408 640 VCOMP_V
FLAG -1408 912 0
FLAG -1760 640 VCOMP_I
FLAG -1760 912 0
FLAG 864 -608 0
FLAG -64 -304 0
FLAG -64 1376 VCOMP_I
FLAG 704 1248 0
FLAG 1520 -592 0
FLAG 1520 80 0
DATAFLAG 496 1248 ""
SYMBOL npn -560 -144 R0
SYMATTR InstName Q1
SYMATTR Value BC546B
SYMBOL npn -112 -144 M0
SYMATTR InstName Q2
SYMATTR Value BC546B
SYMBOL pnp -432 -288 R180
SYMATTR InstName Q3
SYMATTR Value BC327-25
SYMBOL pnp -240 -288 M180
SYMATTR InstName Q4
SYMATTR Value BC327-25
SYMBOL res -512 -544 R0
SYMATTR InstName RE1
SYMATTR Value {RE}
SYMBOL res -192 -544 R0
SYMATTR InstName RE2
SYMATTR Value {RE}
SYMBOL voltage -656 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value 1.2
SYMBOL pnp 208 -464 M270
SYMATTR InstName TIP42C
SYMATTR Value TIP42C
SYMBOL npn 160 -336 R270
SYMATTR InstName Q2N6487
SYMATTR Value Q2N6487
SYMBOL res 496 -544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs
SYMATTR Value 0.1
SYMBOL res 592 -336 R0
SYMATTR InstName Rf1
SYMATTR Value 3.16k
SYMBOL res 592 -80 R0
SYMATTR InstName Rf3
SYMATTR Value 1k08
SYMBOL res 592 16 R0
SYMATTR InstName Rf2
SYMATTR Value 1.09K
SYMBOL res 1008 -240 R0
SYMATTR InstName RL
SYMATTR Value {RL}
SYMBOL cap 1136 -208 R0
SYMATTR InstName C1
SYMATTR Value {CL}
SYMBOL nmos 896 32 M0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL res 464 464 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 592 464 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 528 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 656 592 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 416 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 528 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 400 1088 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 208 992 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res -128 848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL npn -112 784 M0
SYMATTR InstName Q7
SYMATTR Value 2N2222
SYMBOL res 1472 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1472 880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 1072 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 20k
SYMBOL res 1104 704 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 1120 1056 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 976 896 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 900
SYMBOL res 1792 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1664 816 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL voltage -1056 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VSELA
SYMATTR Value 7
SYMBOL npn -544 752 M0
SYMATTR InstName Q8
SYMATTR Value BC546B
SYMBOL res -624 624 R0
SYMATTR InstName R18
SYMATTR Value 4.7K
SYMBOL npn -448 752 R0
SYMATTR InstName Q9
SYMATTR Value BC546B
SYMBOL res -624 848 R0
SYMATTR InstName R19
SYMATTR Value 470
SYMBOL res -400 848 R0
SYMATTR InstName R20
SYMATTR Value 470
SYMBOL Opamps\\opamp2 1232 640 M180
SYMATTR InstName U6
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 1232 960 M180
SYMATTR InstName U3
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 1728 656 M180
SYMATTR InstName U4
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 608 640 R90
SYMATTR InstName U5
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 272 896 R180
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL ind 688 1232 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 1000Meg
SYMBOL cap 480 1280 R0
SYMATTR InstName C2
SYMATTR Value 1000Meg
SYMBOL voltage -1408 720 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName VCOMP1
SYMATTR Value 1.2
SYMBOL voltage -1760 720 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName VCOMP2
SYMATTR Value 656m
SYMBOL current -64 -304 R0
WINDOW 123 24 28 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName I1
SYMATTR Value 0
SYMBOL current 864 -608 R0
WINDOW 123 24 28 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName I2
SYMATTR Value 0
SYMBOL cap -96 -48 R0
SYMATTR InstName C3
SYMATTR Value 22n
SYMBOL res 1136 -432 R0
SYMATTR InstName R22
SYMATTR Value 1
SYMBOL ind -16 1280 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 1000Meg
SYMBOL cap -80 1328 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 1000Meg
SYMBOL cap 752 624 R0
SYMATTR InstName C5
SYMATTR Value 220p
SYMBOL voltage -864 -240 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vin
SYMATTR Value PULSE(6.25 6.45 10m 1n 1n 10m)
SYMBOL cap 288 1088 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 15n
SYMBOL sw 1520 -176 R180
SYMATTR InstName S1
SYMBOL res 1504 -432 R0
SYMATTR InstName R21
SYMATTR Value 4
SYMBOL voltage 1680 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 2 10m 1u 1u 10m)
TEXT -1344 -448 Left 2 !;param Vin 6.35
TEXT -1328 -512 Left 2 ;Parámetros
TEXT -1336 -400 Left 2 !;param RE 4.7
TEXT -1336 -344 Left 2 !;param RL 5
TEXT -1336 -288 Left 2 !;step param RL 100 0.1 0.1
TEXT -48 440 Left 2 ;Lazo de corriente
TEXT 904 432 Left 2 ;Referencia Lazo de Corriente
TEXT 952 208 Left 2 !;lib opamp.sub
TEXT -688 496 Left 2 ;Fuente de corriente de polarizacion\nEspejo Simple
TEXT -1096 504 Left 2 ;Selector
TEXT 2248 -560 Left 2 !.meas DC Vo1rl FIND V(Vo) AT=6.25
TEXT 2256 -520 Left 2 !.meas DC Vo2rl FIND V(Vo) AT=6.45
TEXT 2256 -480 Left 2 !.meas DC RegLin PARAM ((Vo2rl-Vo1rl)/0.2)
TEXT 2256 -608 Left 2 ;Regulacion de linea
TEXT 2256 -344 Left 2 !.meas OP Vo1rc FIND V(Vo) AT 100
TEXT 2256 -304 Left 2 !.meas OP Vo2rc FIND V(Vo) AT 5
TEXT 2256 -264 Left 2 !.meas OP Io1rc FIND I(RL) AT 100
TEXT 2264 -224 Left 2 !.meas OP Io2rc FIND I(RL) AT 5
TEXT 2264 -184 Left 2 !.meas OP RegCar PARAM (-(Vo2rc-Vo1rc)/(Io2rc-Io1rc))
TEXT 2264 -384 Left 2 ;Regulacion de carga
TEXT 2248 -56 Left 2 ;-100*((V(vo)*I(RL))/(V(VIN)*I(VIN)))
TEXT 2264 -104 Left 2 ;Eficiencia
TEXT 2264 56 Left 2 !;include TL081.txt
TEXT 2264 88 Left 2 !.lib opamp.sub
TEXT 2264 -8 Left 2 ;Modelos de simulacion
TEXT 2264 120 Left 2 !.include 2N6487.lib
TEXT 2264 160 Left 2 !.MODEL TIP42C PNP(Is=66.19f Xti=3 Eg=1.11 Vaf=100 Bf=137.6 Ise=862.2f Ne=1.481 Ikf=1.642 Nk=.5695 Xtb=2 Br=5.88 Isc=273.5f Nc=1.24 Ikr=3.555 Rc=79.39m Cjc=870.4p Mjc=.6481 Vjc=.75 Fc=.5 Cje=390.1p Mje=.4343 Vje=.75 Tr=235.4n Tf=23.21n Itf=71.33 Xtf=5.982 Vtf=10 Rb=.1 Vceo=100 Icrating=6 mfg=Texas)
TEXT 2264 24 Left 2 !.include LM358.txt
TEXT -1528 488 Left 2 ;Fuente para analisis \nde Compensacion
TEXT -1872 488 Left 2 ;Fuente para analisis \nde Compensacion
TEXT -1352 -168 Left 2 !.op
TEXT -1352 -136 Left 2 !;ac dec 20 0.1 1000Meg
TEXT -1352 -104 Left 2 !;dc VIN 1 12
TEXT -1352 -72 Left 2 !;tran 0 0.5 0 1m
TEXT -1344 -200 Left 2 ;Tipos de simulacion
TEXT -1840 -256 Left 2 !.param Vin 6.35
TEXT -1832 -216 Left 2 !;param VINAC 1
TEXT -1832 -168 Left 2 !;param VREFDC 1.2
TEXT -1840 -112 Left 2 !;param VREFAC 0
TEXT -1840 -472 Left 2 !.param RL 250
TEXT -1848 0 Left 2 !;step param RE 1k 1.5k 100
TEXT -1840 -408 Left 2 !.param RE 470
TEXT -1848 48 Left 2 !;step param RL 100 0.1 0.25
TEXT -1848 128 Left 2 !;step param VINDC 4 12 0.1
TEXT -1840 -440 Left 2 !.param CL 7u
TEXT -1832 -512 Left 2 ;Parametros de carga
TEXT -1832 -288 Left 2 ;Parametros de fuentes
TEXT -1832 -48 Left 2 ;Parametros de simulacion
TEXT -1848 88 Left 2 !;step param CL list 1u 15u
TEXT -1112 288 Left 2 !;step param C3 list 15n 50n 75n 100n 150n
TEXT -1344 -24 Left 2 !.tran 0 200m 0 0.1m
TEXT 2264 208 Left 2 !.model SW SW (Ron = 0.1 Roff = 100Meg Vt=0.5 Vh=0.25 )
